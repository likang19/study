### spring 循环依赖

~~~
一、理解循环依赖
 1.A依赖B，B依赖A
 2.三者依赖关系，A依赖B ，B依赖C，C依赖A
 3.A依赖A
~~~

~~~
二、解决循环依赖
 	spring 设计了三级缓存来解决此事，当我们调用getBean的时候，spring 会依次先从一二级缓存里面找Bean，如果都找不到Bean，此时会实例化Bean（早期的初始化Bean），然后将目标放进二级缓存中，同时会标记循环依赖，然后等待下一次循环赋值，也就是解析@Autowired注解。赋值完成后，会将Bean放进一级缓存里面
 	总结：一级缓存存放所有成熟Bean，二级缓存存放所有早期Bean
    三级缓存是干什么用呢？？？
       三级缓存用于代理Bean，当我们调用getBean时，发现目标需要工厂代理来创建，此时就会将目标存放到三级缓存中，但最终赋值完后都会存放到一级缓存中
~~~

~~~
三、Spring 中哪些情况下，不能解决循环依赖问题
1.多例Bean ，通过setter注入的情况，不能解决循环依赖
2.构造器注入的Bean的情况下，不能解决循环依赖
3.单例代理Bean，通过setter注入的情况，不能解决循环依赖
4.设置@DependsOn的Bean不能解决循环依赖
~~~

